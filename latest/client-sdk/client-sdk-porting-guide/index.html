


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for Secure Device Onboard Project">
      
      
        <link rel="canonical" href="https://secure-device-onboard.github.io/docs/client-sdk/client-sdk-porting-guide/">
      
      
        <meta name="author" content="Secure Device Onboard Contributers">
      
      <link rel="shortcut icon" href="../../images/securedeviceonboard-icon-color.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.7">
    
    
      
        <title>Porting Guide - Secure Device Onboard</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.b8ac9624.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../css/version-select.css">
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#porting-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://secure-device-onboard.github.io/docs/" title="Secure Device Onboard" class="md-header-nav__button md-logo" aria-label="Secure Device Onboard">
      
  <img src="../../images/securedeviceonboard-icon-color.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Secure Device Onboard
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Porting Guide
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
          

  

<nav class="md-tabs md-tabs--active" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../.." class="md-tabs__link">
          Home
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../client-sdk-reference-guide/" class="md-tabs__link md-tabs__link--active">
          Client SDK
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../iot-platform-sdk/introduction/" class="md-tabs__link">
          IOT Platform SDK
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../rendezvous-service/introduction/" class="md-tabs__link">
          Rendezvous Service
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../supply-chain-tools/manufacturing/manufacturer-enablement-guide/" class="md-tabs__link">
          Supply Chain Tools
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../protocol-reference-implementation/introduction/" class="md-tabs__link">
          Protocol Reference Implementation
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../all-in-one-demo/introduction/" class="md-tabs__link">
          All-in-one Demo
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../protocol-specification/introduction/" class="md-tabs__link">
          Protocol Specification
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://secure-device-onboard.github.io/docs/" title="Secure Device Onboard" class="md-nav__button md-logo" aria-label="Secure Device Onboard">
      
  <img src="../../images/securedeviceonboard-icon-color.png" alt="logo">

    </a>
    Secure Device Onboard
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Home
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Home" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Home
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/" title="Reference" class="md-nav__link">
      Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/" title="Community" class="md-nav__link">
      Community
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../releases/" title="Releases" class="md-nav__link">
      Releases
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security-best-practices/security-best-practices/" title="Security Best Practices" class="md-nav__link">
      Security Best Practices
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Client SDK
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Client SDK" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Client SDK
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../client-sdk-reference-guide/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../client-sdk-api-reference/" title="API Reference" class="md-nav__link">
      API Reference
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Porting Guide
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Porting Guide" class="md-nav__link md-nav__link--active">
      Porting Guide
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#porting-guide" class="md-nav__link">
    Porting Guide
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution-architecture" class="md-nav__link">
    Solution Architecture
  </a>
  
    <nav class="md-nav" aria-label="Solution Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#code-structure" class="md-nav__link">
    Code Structure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-system" class="md-nav__link">
    Build System
  </a>
  
    <nav class="md-nav" aria-label="Build System">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cli_inputcmake-erstwhile-basemk" class="md-nav__link">
    cli_input.cmake (erstwhile base.mk)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blob_pathcmake" class="md-nav__link">
    blob_path.cmake
  </a>
  
    <nav class="md-nav" aria-label="blob_path.cmake">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_cred_normal-normalblob" class="md-nav__link">
    SDO_CRED_NORMAL - Normal.blob
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#platform_ivhmac_keyaes_key" class="md-nav__link">
    PLATFORM_(IV/HMAC_KEY/AES_KEY)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manufacturer_ipdnport" class="md-nav__link">
    MANUFACTURER_(IP/DN/PORT)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecdsa_privkey" class="md-nav__link">
    ECDSA_PRIVKEY
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_cred_securemfg" class="md-nav__link">
    SDO_CRED_(SECURE/MFG)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extensioncmake-erstwhile-cryptoconf" class="md-nav__link">
    extension.cmake (erstwhile crypto.conf)
  </a>
  
    <nav class="md-nav" aria-label="extension.cmake (erstwhile crypto.conf)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supported-configurations" class="md-nav__link">
    Supported Configurations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto-configuration" class="md-nav__link">
    Auto Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-sdk-constants" class="md-nav__link">
    Client SDK Constants
  </a>
  
    <nav class="md-nav" aria-label="Client SDK Constants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_sdk_error" class="md-nav__link">
    sdo_sdk_error
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_sdk_status" class="md-nav__link">
    sdo_sdk_status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_sdk_device_state" class="md-nav__link">
    sdo_sdk_device_state
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-sdk-functions" class="md-nav__link">
    Client SDK Functions
  </a>
  
    <nav class="md-nav" aria-label="Client SDK Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_sdk_init" class="md-nav__link">
    sdo_sdk_init()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_sdk_run" class="md-nav__link">
    sdo_sdk_run()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_sdk_resale" class="md-nav__link">
    sdo_sdk_resale()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_sdk_get_status" class="md-nav__link">
    sdo_sdk_get_status()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crypto-subsystem-api" class="md-nav__link">
    Crypto Subsystem API
  </a>
  
    <nav class="md-nav" aria-label="Crypto Subsystem API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#constants" class="md-nav__link">
    Constants
  </a>
  
    <nav class="md-nav" aria-label="Constants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_crypto_hash_type" class="md-nav__link">
    SDO_CRYPTO_HASH_TYPE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_crypto_hmac_type" class="md-nav__link">
    SDO_CRYPTO_HMAC_TYPE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_crypto_pub_key_encoding" class="md-nav__link">
    SDO_CRYPTO_PUB_KEY_ENCODING
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_crypto_pub_key_algo" class="md-nav__link">
    SDO_CRYPTO_PUB_KEY_ALGO
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_pk_hash" class="md-nav__link">
    SDO_PK_HASH
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structures" class="md-nav__link">
    Structures
  </a>
  
    <nav class="md-nav" aria-label="Structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_byte_array_t" class="md-nav__link">
    sdo_byte_array_t
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialization-and-exit-functions" class="md-nav__link">
    Initialization and Exit Functions
  </a>
  
    <nav class="md-nav" aria-label="Initialization and Exit Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crypto_init" class="md-nav__link">
    crypto_init()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_close" class="md-nav__link">
    crypto_close()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#random-number-functions" class="md-nav__link">
    Random Number Functions
  </a>
  
    <nav class="md-nav" aria-label="Random Number Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#random_init" class="md-nav__link">
    random_init()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#random_close" class="md-nav__link">
    random_close()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_random_bytes" class="md-nav__link">
    crypto_hal_random_bytes()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-digest-and-mac-functions" class="md-nav__link">
    Message Digest and MAC Functions
  </a>
  
    <nav class="md-nav" aria-label="Message Digest and MAC Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crypto_hal_hash" class="md-nav__link">
    crypto_hal_hash()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_hmac" class="md-nav__link">
    crypto_hal_hmac()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asymmetric-functions" class="md-nav__link">
    Asymmetric Functions
  </a>
  
    <nav class="md-nav" aria-label="Asymmetric Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crypto_hal_sig_verify" class="md-nav__link">
    crypto_hal_sig_verify()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_ecdsa_sign" class="md-nav__link">
    crypto_hal_ecdsa_sign()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_rsa_encrypt" class="md-nav__link">
    crypto_hal_rsa_encrypt()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_rsa_len" class="md-nav__link">
    crypto_hal_rsa_len()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#symmetric-cipher-functions" class="md-nav__link">
    Symmetric Cipher Functions
  </a>
  
    <nav class="md-nav" aria-label="Symmetric Cipher Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crypto_hal_aes_encrypt" class="md-nav__link">
    crypto_hal_aes_encrypt()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_aes_decrypt" class="md-nav__link">
    crypto_hal_aes_decrypt()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#certificate-signing-request" class="md-nav__link">
    Certificate Signing Request
  </a>
  
    <nav class="md-nav" aria-label="Certificate Signing Request">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crypto_hal_get_device_csr" class="md-nav__link">
    crypto_hal_get_device_csr()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-exchange-functions" class="md-nav__link">
    Key Exchange Functions
  </a>
  
    <nav class="md-nav" aria-label="Key Exchange Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crypto_hal_kex_init" class="md-nav__link">
    crypto_hal_kex_init()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_kex_close" class="md-nav__link">
    crypto_hal_kex_close()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_get_device_random" class="md-nav__link">
    crypto_hal_get_device_random()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_set_peer_random" class="md-nav__link">
    crypto_hal_set_peer_random()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_get_secret" class="md-nav__link">
    crypto_hal_get_secret()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#base64" class="md-nav__link">
    Base64
  </a>
  
    <nav class="md-nav" aria-label="Base64">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bin_tob64length" class="md-nav__link">
    bin_toB64Length
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b64to_bin_length" class="md-nav__link">
    b64To_bin_length
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bin_tob64" class="md-nav__link">
    bin_toB64
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b64to_bin" class="md-nav__link">
    b64To_bin
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network-subsystem-api" class="md-nav__link">
    Network Subsystem API
  </a>
  
    <nav class="md-nav" aria-label="Network Subsystem API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#constants_1" class="md-nav__link">
    Constants
  </a>
  
    <nav class="md-nav" aria-label="Constants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ipv4_addr_len" class="md-nav__link">
    IPV4_ADDR_LEN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_type_error" class="md-nav__link">
    SDO_TYPE_ERROR
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-types" class="md-nav__link">
    Data Types
  </a>
  
    <nav class="md-nav" aria-label="Data Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_ip_address_t" class="md-nav__link">
    sdo_ip_address_t
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_con_handle" class="md-nav__link">
    sdo_con_handle
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connection-management-functions" class="md-nav__link">
    Connection Management Functions
  </a>
  
    <nav class="md-nav" aria-label="Connection Management Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_con_setup" class="md-nav__link">
    sdo_con_setup()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_con_teardown" class="md-nav__link">
    sdo_con_teardown()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_con_dns_lookup" class="md-nav__link">
    sdo_con_dns_lookup()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_con_connect" class="md-nav__link">
    sdo_con_connect()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_con_disconnect" class="md-nav__link">
    sdo_con_disconnect()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connection-data-management-functions" class="md-nav__link">
    Connection Data Management Functions
  </a>
  
    <nav class="md-nav" aria-label="Connection Data Management Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_con_recv_msg_header" class="md-nav__link">
    sdo_con_recv_msg_header()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_con_recv_msg_body" class="md-nav__link">
    sdo_con_recv_msg_body()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_con_send_message" class="md-nav__link">
    sdo_con_send_message()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-generic-functions" class="md-nav__link">
    Network Generic Functions
  </a>
  
    <nav class="md-nav" aria-label="Network Generic Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_net_to_host_long" class="md-nav__link">
    sdo_net_to_host_long()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_host_to_net_long" class="md-nav__link">
    sdo_host_to_net_long()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_printable_to_net" class="md-nav__link">
    sdo_printable_to_net()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#legacy-functions" class="md-nav__link">
    Legacy Functions
  </a>
  
    <nav class="md-nav" aria-label="Legacy Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get_device_model" class="md-nav__link">
    get_device_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_device_serial_number" class="md-nav__link">
    get_device_serial_number()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_random" class="md-nav__link">
    sdo_random()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_sleep" class="md-nav__link">
    sdo_sleep()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage-subsystem-api" class="md-nav__link">
    Storage Subsystem API
  </a>
  
    <nav class="md-nav" aria-label="Storage Subsystem API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#constants_2" class="md-nav__link">
    Constants
  </a>
  
    <nav class="md-nav" aria-label="Constants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_sdk_blob_flags" class="md-nav__link">
    sdo_sdk_blob_flags
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-types_1" class="md-nav__link">
    Data Types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blob-functions" class="md-nav__link">
    Blob Functions
  </a>
  
    <nav class="md-nav" aria-label="Blob Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_blob_read" class="md-nav__link">
    sdo_blob_read()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_blob_write" class="md-nav__link">
    sdo_blob_write()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_blob_size" class="md-nav__link">
    sdo_blob_size()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_read_epid_key" class="md-nav__link">
    sdo_read_epid_key()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      IOT Platform SDK
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="IOT Platform SDK" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        IOT Platform SDK
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../iot-platform-sdk/introduction/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../iot-platform-sdk/running-the-demo/" title="Running The Demo" class="md-nav__link">
      Running The Demo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../iot-platform-sdk/development-guide/" title="Development Guide" class="md-nav__link">
      Development Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Rendezvous Service
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Rendezvous Service" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Rendezvous Service
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../rendezvous-service/introduction/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Supply Chain Tools
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Supply Chain Tools" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Supply Chain Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../supply-chain-tools/manufacturing/manufacturer-enablement-guide/" title="Manufacturing Tools" class="md-nav__link">
      Manufacturing Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../supply-chain-tools/reseller/reseller-enablement-guide/" title="Reseller Tools" class="md-nav__link">
      Reseller Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../supply-chain-tools/keystore-guide/" title="Keystore Guide" class="md-nav__link">
      Keystore Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Protocol Reference Implementation
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Protocol Reference Implementation" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Protocol Reference Implementation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol-reference-implementation/introduction/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      All-in-one Demo
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="All-in-one Demo" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        All-in-one Demo
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../all-in-one-demo/introduction/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Protocol Specification
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Protocol Specification" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Protocol Specification
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol-specification/introduction/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol-specification/protocol-description/" title="Protocol Description" class="md-nav__link">
      Protocol Description
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol-specification/protocol-data-types/" title="Protocol Data Types" class="md-nav__link">
      Protocol Data Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol-specification/data-transmission-persistence/" title="Data Transmission & Persistence" class="md-nav__link">
      Data Transmission & Persistence
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol-specification/detailed-protocol-description/" title="Detailed Protocol Description" class="md-nav__link">
      Detailed Protocol Description
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol-specification/resale-protocol/" title="Resale Protocol" class="md-nav__link">
      Resale Protocol
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol-specification/credential-reuse-protocol/" title="Credential Reuse Protocol" class="md-nav__link">
      Credential Reuse Protocol
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol-specification/appendix-b-device-provisioning-with-ecdsa/" title="Appendix B - Device Provisioning with ECDSA" class="md-nav__link">
      Appendix B - Device Provisioning with ECDSA
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol-specification/appendix-c-secure-device-onboard-1-1-crypto-upgrade/" title="Appendix C - Secure Device Onboard 1.1 Crypto Upgrade" class="md-nav__link">
      Appendix C - Secure Device Onboard 1.1 Crypto Upgrade
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#porting-guide" class="md-nav__link">
    Porting Guide
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution-architecture" class="md-nav__link">
    Solution Architecture
  </a>
  
    <nav class="md-nav" aria-label="Solution Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#code-structure" class="md-nav__link">
    Code Structure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-system" class="md-nav__link">
    Build System
  </a>
  
    <nav class="md-nav" aria-label="Build System">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cli_inputcmake-erstwhile-basemk" class="md-nav__link">
    cli_input.cmake (erstwhile base.mk)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blob_pathcmake" class="md-nav__link">
    blob_path.cmake
  </a>
  
    <nav class="md-nav" aria-label="blob_path.cmake">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_cred_normal-normalblob" class="md-nav__link">
    SDO_CRED_NORMAL - Normal.blob
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#platform_ivhmac_keyaes_key" class="md-nav__link">
    PLATFORM_(IV/HMAC_KEY/AES_KEY)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manufacturer_ipdnport" class="md-nav__link">
    MANUFACTURER_(IP/DN/PORT)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecdsa_privkey" class="md-nav__link">
    ECDSA_PRIVKEY
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_cred_securemfg" class="md-nav__link">
    SDO_CRED_(SECURE/MFG)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extensioncmake-erstwhile-cryptoconf" class="md-nav__link">
    extension.cmake (erstwhile crypto.conf)
  </a>
  
    <nav class="md-nav" aria-label="extension.cmake (erstwhile crypto.conf)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supported-configurations" class="md-nav__link">
    Supported Configurations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto-configuration" class="md-nav__link">
    Auto Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-sdk-constants" class="md-nav__link">
    Client SDK Constants
  </a>
  
    <nav class="md-nav" aria-label="Client SDK Constants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_sdk_error" class="md-nav__link">
    sdo_sdk_error
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_sdk_status" class="md-nav__link">
    sdo_sdk_status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_sdk_device_state" class="md-nav__link">
    sdo_sdk_device_state
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-sdk-functions" class="md-nav__link">
    Client SDK Functions
  </a>
  
    <nav class="md-nav" aria-label="Client SDK Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_sdk_init" class="md-nav__link">
    sdo_sdk_init()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_sdk_run" class="md-nav__link">
    sdo_sdk_run()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_sdk_resale" class="md-nav__link">
    sdo_sdk_resale()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_sdk_get_status" class="md-nav__link">
    sdo_sdk_get_status()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crypto-subsystem-api" class="md-nav__link">
    Crypto Subsystem API
  </a>
  
    <nav class="md-nav" aria-label="Crypto Subsystem API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#constants" class="md-nav__link">
    Constants
  </a>
  
    <nav class="md-nav" aria-label="Constants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_crypto_hash_type" class="md-nav__link">
    SDO_CRYPTO_HASH_TYPE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_crypto_hmac_type" class="md-nav__link">
    SDO_CRYPTO_HMAC_TYPE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_crypto_pub_key_encoding" class="md-nav__link">
    SDO_CRYPTO_PUB_KEY_ENCODING
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_crypto_pub_key_algo" class="md-nav__link">
    SDO_CRYPTO_PUB_KEY_ALGO
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_pk_hash" class="md-nav__link">
    SDO_PK_HASH
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structures" class="md-nav__link">
    Structures
  </a>
  
    <nav class="md-nav" aria-label="Structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_byte_array_t" class="md-nav__link">
    sdo_byte_array_t
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialization-and-exit-functions" class="md-nav__link">
    Initialization and Exit Functions
  </a>
  
    <nav class="md-nav" aria-label="Initialization and Exit Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crypto_init" class="md-nav__link">
    crypto_init()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_close" class="md-nav__link">
    crypto_close()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#random-number-functions" class="md-nav__link">
    Random Number Functions
  </a>
  
    <nav class="md-nav" aria-label="Random Number Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#random_init" class="md-nav__link">
    random_init()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#random_close" class="md-nav__link">
    random_close()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_random_bytes" class="md-nav__link">
    crypto_hal_random_bytes()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-digest-and-mac-functions" class="md-nav__link">
    Message Digest and MAC Functions
  </a>
  
    <nav class="md-nav" aria-label="Message Digest and MAC Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crypto_hal_hash" class="md-nav__link">
    crypto_hal_hash()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_hmac" class="md-nav__link">
    crypto_hal_hmac()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asymmetric-functions" class="md-nav__link">
    Asymmetric Functions
  </a>
  
    <nav class="md-nav" aria-label="Asymmetric Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crypto_hal_sig_verify" class="md-nav__link">
    crypto_hal_sig_verify()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_ecdsa_sign" class="md-nav__link">
    crypto_hal_ecdsa_sign()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_rsa_encrypt" class="md-nav__link">
    crypto_hal_rsa_encrypt()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_rsa_len" class="md-nav__link">
    crypto_hal_rsa_len()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#symmetric-cipher-functions" class="md-nav__link">
    Symmetric Cipher Functions
  </a>
  
    <nav class="md-nav" aria-label="Symmetric Cipher Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crypto_hal_aes_encrypt" class="md-nav__link">
    crypto_hal_aes_encrypt()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_aes_decrypt" class="md-nav__link">
    crypto_hal_aes_decrypt()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#certificate-signing-request" class="md-nav__link">
    Certificate Signing Request
  </a>
  
    <nav class="md-nav" aria-label="Certificate Signing Request">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crypto_hal_get_device_csr" class="md-nav__link">
    crypto_hal_get_device_csr()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-exchange-functions" class="md-nav__link">
    Key Exchange Functions
  </a>
  
    <nav class="md-nav" aria-label="Key Exchange Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crypto_hal_kex_init" class="md-nav__link">
    crypto_hal_kex_init()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_kex_close" class="md-nav__link">
    crypto_hal_kex_close()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_get_device_random" class="md-nav__link">
    crypto_hal_get_device_random()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_set_peer_random" class="md-nav__link">
    crypto_hal_set_peer_random()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crypto_hal_get_secret" class="md-nav__link">
    crypto_hal_get_secret()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#base64" class="md-nav__link">
    Base64
  </a>
  
    <nav class="md-nav" aria-label="Base64">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bin_tob64length" class="md-nav__link">
    bin_toB64Length
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b64to_bin_length" class="md-nav__link">
    b64To_bin_length
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bin_tob64" class="md-nav__link">
    bin_toB64
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b64to_bin" class="md-nav__link">
    b64To_bin
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network-subsystem-api" class="md-nav__link">
    Network Subsystem API
  </a>
  
    <nav class="md-nav" aria-label="Network Subsystem API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#constants_1" class="md-nav__link">
    Constants
  </a>
  
    <nav class="md-nav" aria-label="Constants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ipv4_addr_len" class="md-nav__link">
    IPV4_ADDR_LEN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_type_error" class="md-nav__link">
    SDO_TYPE_ERROR
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-types" class="md-nav__link">
    Data Types
  </a>
  
    <nav class="md-nav" aria-label="Data Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_ip_address_t" class="md-nav__link">
    sdo_ip_address_t
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_con_handle" class="md-nav__link">
    sdo_con_handle
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connection-management-functions" class="md-nav__link">
    Connection Management Functions
  </a>
  
    <nav class="md-nav" aria-label="Connection Management Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_con_setup" class="md-nav__link">
    sdo_con_setup()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_con_teardown" class="md-nav__link">
    sdo_con_teardown()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_con_dns_lookup" class="md-nav__link">
    sdo_con_dns_lookup()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_con_connect" class="md-nav__link">
    sdo_con_connect()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_con_disconnect" class="md-nav__link">
    sdo_con_disconnect()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connection-data-management-functions" class="md-nav__link">
    Connection Data Management Functions
  </a>
  
    <nav class="md-nav" aria-label="Connection Data Management Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_con_recv_msg_header" class="md-nav__link">
    sdo_con_recv_msg_header()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_con_recv_msg_body" class="md-nav__link">
    sdo_con_recv_msg_body()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_con_send_message" class="md-nav__link">
    sdo_con_send_message()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-generic-functions" class="md-nav__link">
    Network Generic Functions
  </a>
  
    <nav class="md-nav" aria-label="Network Generic Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_net_to_host_long" class="md-nav__link">
    sdo_net_to_host_long()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_host_to_net_long" class="md-nav__link">
    sdo_host_to_net_long()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_printable_to_net" class="md-nav__link">
    sdo_printable_to_net()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#legacy-functions" class="md-nav__link">
    Legacy Functions
  </a>
  
    <nav class="md-nav" aria-label="Legacy Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get_device_model" class="md-nav__link">
    get_device_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_device_serial_number" class="md-nav__link">
    get_device_serial_number()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_random" class="md-nav__link">
    sdo_random()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_sleep" class="md-nav__link">
    sdo_sleep()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage-subsystem-api" class="md-nav__link">
    Storage Subsystem API
  </a>
  
    <nav class="md-nav" aria-label="Storage Subsystem API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#constants_2" class="md-nav__link">
    Constants
  </a>
  
    <nav class="md-nav" aria-label="Constants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_sdk_blob_flags" class="md-nav__link">
    sdo_sdk_blob_flags
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-types_1" class="md-nav__link">
    Data Types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blob-functions" class="md-nav__link">
    Blob Functions
  </a>
  
    <nav class="md-nav" aria-label="Blob Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sdo_blob_read" class="md-nav__link">
    sdo_blob_read()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_blob_write" class="md-nav__link">
    sdo_blob_write()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_blob_size" class="md-nav__link">
    sdo_blob_size()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sdo_read_epid_key" class="md-nav__link">
    sdo_read_epid_key()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                  <h1>Porting Guide</h1>
                
                <h2 id="porting-guide">Porting Guide<a class="headerlink" href="#porting-guide" title="Permanent link">&para;</a></h2>
<p>This document provides a guide to porting the Client SDK to new platforms.</p>
<h2 id="solution-architecture">Solution Architecture<a class="headerlink" href="#solution-architecture" title="Permanent link">&para;</a></h2>
<p><img alt="SDO Client Block Diagram" src="../img/4-software-architecture.png" /></p>
<p>The Client SDK reference solution is comprised of 3 layers:</p>
<ol>
<li><strong>Application</strong>: The reference application which triggers the Device Initialization and Ownership Transfer State Machine.</li>
<li><strong>Library</strong>: The Device Initialization and Ownership Transfer Protocol implementation for Secure Device Onboarding.</li>
<li><strong>Platform</strong>: Platform-specific implementation.</li>
</ol>
<p>The Platform layer is itself comprised of three modules: Crypto, Network, and Storage:</p>
<ol>
<li>
<p><strong>Crypto</strong>: Implementation of Cryptographic requirements of Ownership Transfer Protocol. This also abstracts the Platform specific crypto methods from the Library. So, the crypto implementation is divided into:</p>
<ul>
<li>Library: specific implementation: There is no impact of adding new platform</li>
<li>Platform: Specific implementation: The impact of adding new platform is detailed in Crypto Subsystem API section below.</li>
</ul>
</li>
<li>
<p><strong>Network</strong>: Implementation of Networking. This abstracts the Platform specific networking functionality from Library. The impact of adding new platform is detailed in the Network Subsystem API section below.</p>
</li>
<li><strong>Storage</strong>: Implementation of Secure Storage. This abstracts the Platform specific storage methods from Library. The impact of adding new platform is detailed in the Storage Subsystem API section below.
</li>
</ol>
<h3 id="code-structure">Code Structure<a class="headerlink" href="#code-structure" title="Permanent link">&para;</a></h3>
<p>The Client SDK reference implementation source code is organized as follows (folders that are discussed in this porting guide are indicated with "*"):</p>
<pre><code> app  - - - - - - Reference Application
 crypto*  - - - - Crypto Subsystem
 cmake* - - - - - cmake sub files
 data - - - - - - Filesystem place to store blob like keys, network info.
 device_modules - Service Info Modules
 docs - - - - - - Documents
 include  - - - - Client SDK APIs
 lib  - - - - - - The core protocol implementation
 mbedos - - - - - mbedos based Client SDK implementation
 network* - - - - Network subsystem
 NOTICES  - - - - License specific information
 storage* - - - - Storage Subsystem
 utils  - - - - - Reference files for setting up TPM, flashing etc.
</code></pre>

<h3 id="build-system">Build System<a class="headerlink" href="#build-system" title="Permanent link">&para;</a></h3>
<p>Starting with release v1.9.0 of the Client SDK, the build system uses cmake. This section explains the most prominent configurations in build system. The reference application is tightly coupled with the build system, storage and crypto APIs. The intent of this section is to cover those specific bindings to make the solution easy to traverse.</p>
<pre><code> app
    CMakeLists.txt
 cmake
    blob_path.cmake
    cli_input.cmake
    extension.cmake
    pristine.cmake
 CMakeLists.txt
 crypto
    CMakeLists.txt
 device_modules
    CMakeLists.txt
 lib
    CMakeLists.txt
 mbedos
    CMakeLists.txt
 network
    CMakeLists.txt
 storage
     CMakeLists.txt
</code></pre>

<h4 id="cli_inputcmake-erstwhile-basemk">cli_input.cmake (erstwhile base.mk)<a class="headerlink" href="#cli_inputcmake-erstwhile-basemk" title="Permanent link">&para;</a></h4>
<p>The base.mk was used to define the build flags as a top-level configuration Makefile. The cli_input.cmake still retains that property, however, the blob specific configuration is moved to blob_path.cmake.</p>
<p>The following specifies the default build configuration which can be overridden in invocation of cmake.</p>
<pre><code>set (TARGET_OS linux)
set (CSTD c99)
set (TLS openssl)
set (DA ecdsa256)
set (PK_ENC ecdsa)
set (KEX ecdh)
set (AES_MODE ctr)
set (EPID epid_r6)
set (BUILD debug)
set (TARGET_OS linux)
set (HTTPPROXY true)
set (PROXY_DISCOVERY false)
set (OPTIMIZE 1)
set (MODULES false)
set (DA_FILE der)
set (CRYPTO_HW false)
set (ARCH x86)
set (RETRY true)
set (unit-test false)
set (MANUFACTURER_TOOLKIT true)
set (STORAGE true)
set (BOARD NUCLEO_F767ZI)
set (BLOB_PATH .)
set (TPM2_TCTI_TYPE tabrmd)
set (RESALE false)
set (REUSE true)
</code></pre>

<h4 id="blob_pathcmake">blob_path.cmake<a class="headerlink" href="#blob_pathcmake" title="Permanent link">&para;</a></h4>
<p>The blob specific paths are set with this cmake file. A new variable BLOB_PATH is introduced to customize the placement of blobs in the filesystem.</p>
<pre><code>client_sdk_compile_definitions(
    -DSERIAL_FILE=\&quot;${BLOB_PATH}/data/manufacturer_sn.bin\&quot;
    -DMODEL_FILE=\&quot;${BLOB_PATH}/data/manufacturer_mod.bin\&quot;
    -DPLATFORM_IV=\&quot;${BLOB_PATH}/data/platform_iv.bin\&quot;
    -DPLATFORM_HMAC_KEY=\&quot;${BLOB_PATH}/data/platform_hmac_key.bin\&quot;
    -DPLATFORM_AES_KEY=\&quot;${BLOB_PATH}/data/platform_aes_key.bin\&quot;
    -DEPID_PRIVKEY=\&quot;${BLOB_PATH}/data/epidprivkey.dat\&quot;
    -DSDO_CRED=\&quot;${BLOB_PATH}/data/PMDeviceCredentials.bin\&quot;
    -DMANUFACTURER_IP=\&quot;${BLOB_PATH}/data/manufacturer_ip.bin\&quot;
    -DMANUFACTURER_DN=\&quot;${BLOB_PATH}/data/manufacturer_dn.bin\&quot;
    -DMANUFACTURER_PORT=\&quot;${BLOB_PATH}/data/manufacturer_port.bin\&quot;
    )

client_sdk_compile_definitions(
    -DSDO_CACERT=\&quot;${BLOB_PATH}/data/cacert.bin\&quot;
    -DSDO_PUBKEY=\&quot;${BLOB_PATH}/data/pubkey.dat\&quot;
    -DSDO_SIGRL=\&quot;${BLOB_PATH}/data/sigrl.dat\&quot;
    -DSDO_CRED_SECURE=\&quot;${BLOB_PATH}/data/Secure.blob\&quot;
    -DSDO_CRED_MFG=\&quot;${BLOB_PATH}/data/Mfg.blob\&quot;
    -DSDO_CRED_NORMAL=\&quot;${BLOB_PATH}/data/Normal.blob\&quot;
    )
</code></pre>

<h5 id="sdo_cred_normal-normalblob">SDO_CRED_NORMAL - Normal.blob<a class="headerlink" href="#sdo_cred_normal-normalblob" title="Permanent link">&para;</a></h5>
<p>The Client SDK or Device lifecycle is maintained in this blob. This data is stored as Authenticated Data meaning that HMAC256 is calculated over this data and stored back.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is part of custom storage implementation in reference solution. Please refer Storage Subsystem API for details required for implementation on custom platform. The Application may use APIs listed in Storage Subsystem API, to manipulate blobs, so, the blobs remain consistent as expected by Client SDK. However, the APIs mentioned in the above said section are internal APIs and it is up to the application developer to reuse them.</p>
</div>
<p>The application, before starting the state machine by calling <code>sdo_sdk_init()</code> generates the HMAC over this data and stores it back along with the data.
This is initialized to the following value to indicate that the device is in manufactured state. It also allows the reference application to perform multiple cycles of Secure Device Onboard operation.</p>
<pre><code>blob_path.cmake:
file(WRITE ${BLOB_PATH}/data/Normal.blob &quot;{\&quot;ST\&quot;:1}&quot;)
</code></pre>

<h5 id="platform_ivhmac_keyaes_key">PLATFORM_(IV/HMAC_KEY/AES_KEY)<a class="headerlink" href="#platform_ivhmac_keyaes_key" title="Permanent link">&para;</a></h5>
<p>The purpose of these defines is to specify the location where the reference solution stores the following information:</p>
<ul>
<li><strong>PLATFORM_IV:</strong> Initialization Vector used in Authenticated Encryption of Secure Blobs. The Secure Blobs are internal to Client SDK and are not controlled by the application.</li>
<li><strong>PLATFORM_HMAC_KEY:</strong> HMAC key to authenticate Normal.blob or any other internal blob which only needs Authenticated read.</li>
<li><strong>PLATFORM_AES_KEY:</strong> AES key to Authenticate Encrypt the Secure Blobs. The Secure Blobs are internal to Client SDK and are not controlled by the application.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These flags are not necessary for the platforms which have their own Secure Storage mechanisms. The platform may be able to store all blobs using Authenticated Encryption including Normal.blob. Client SDK always uses <code>sdo_blob_read()</code> to read the data, so, the underlying detail is already abstracted. In the reference solution, it is expected that these files exist physically although without any content. The content gets generated on an as-needed basis.</p>
</div>
<h5 id="manufacturer_ipdnport">MANUFACTURER_(IP/DN/PORT)<a class="headerlink" href="#manufacturer_ipdnport" title="Permanent link">&para;</a></h5>
<p>Client SDK uses the location defined by the below flags to connect to Manufacturer Server to perform Device Initialization.</p>
<ul>
<li><strong>MANUFACTURER_IP:</strong> This is the manufacturer IP address to be used for performing Device Initialization.</li>
<li><strong>MANUFACTURER_DN:</strong> This is the manufacturer Domain Name used to resolve to the IP address. This is used if the MANUFACTURER_IP is not given.</li>
<li><strong>MANUFACTURER_PORT:</strong> This is the manufacturer server port, where the Device Initialization protocol is waiting for the device. By default, the port is 8039 if this blob is not created, otherwise, the port is used from this blob.</li>
</ul>
<h5 id="ecdsa_privkey">ECDSA_PRIVKEY<a class="headerlink" href="#ecdsa_privkey" title="Permanent link">&para;</a></h5>
<p>This define specifies the ECDSA private key to be used as a device identity. Two options are possible:</p>
<ul>
<li>The key could be pre-created like the reference application.</li>
<li>If the device supports secure storage, then the key can be generated within the device and stored using secure storage APIs</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section is not a recommendation, but specifies some of the possibilities that exist.</p>
</div>
<h5 id="sdo_cred_securemfg">SDO_CRED_(SECURE/MFG)<a class="headerlink" href="#sdo_cred_securemfg" title="Permanent link">&para;</a></h5>
<p>These defines are used internally by Client SDK:</p>
<ul>
<li><strong>SDO_CRED_SECURE:</strong> This define specifies the location of the device secret. This blob is Authenticated Encrypted in the reference solution.</li>
<li><strong>SDO_CRED_MFG:</strong> This define specifies the location of Manufacturer data. This blob is stored with Authenticated information.</li>
</ul>
<h4 id="extensioncmake-erstwhile-cryptoconf">extension.cmake (erstwhile crypto.conf)<a class="headerlink" href="#extensioncmake-erstwhile-cryptoconf" title="Permanent link">&para;</a></h4>
<p>This cmake file consists mostly of build configuration from crypto.conf but is not limited to it.</p>
<h5 id="supported-configurations">Supported Configurations<a class="headerlink" href="#supported-configurations" title="Permanent link">&para;</a></h5>
<p>The following content is retained from crypto.conf for readability.</p>
<pre><code>### KEX (key exchange) validation
SUPPORTED_KEX = dh asym ecdh ecdh384 none

### Device Attestation validation
SUPPORTED_DA = ecdsa256 ecdsa384 tpm20_ecdsa256

### Public Key Encoding
SUPPORTED_PK_ENC = rsa ecdsa

### AES mode for secure channel
SUPPORTED_AES_MODE = cbc ctr
</code></pre>

<ul>
<li>
<p><strong>SUPPORTED_KEX:</strong> This specifies the key exchange algorithms implemented to create a secure channel between Device and Owner in Ownership Transfer Protocol.</p>
<ul>
<li>dh: Diffie Hellman</li>
<li>asym: Asymmetric (based on RSA)</li>
<li>ecdhxxx: Based on Elliptic Curve Diffie Hellman</li>
</ul>
</li>
<li>
<p><strong>SUPPORTED_DA:</strong> This specifies the supported Device Attestation algorithms which device uses to prove its identity to Rendezvous Server and Owner.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>tpm20_ecdsa256 isnt a separate algorithm, it uses ecdsa256 as Device Attestation, but uses TPM2.0 to generate keys and store data</p>
</div>
</li>
<li>
<p><strong>SUPPORTED_PK_ENC:</strong> This specifies the Public Key Encoding which Device supports to authenticate the Owner</p>
</li>
<li>
<p><strong>SUPPORTED_AES_MODE:</strong> This specifies the AES mode of encryption supported by device. The device supports CBC and CTR.</p>
</li>
</ul>
<h5 id="auto-configuration">Auto Configuration<a class="headerlink" href="#auto-configuration" title="Permanent link">&para;</a></h5>
<p>A selection of higher crypto for Device Attestation automatically configures Key Exchange to use higher crypto.</p>
<pre><code>elseif(DA MATCHES ecdsa384)
    client_sdk_compile_definitions(
      -DECDSA384_DA)
    #Move KEX to higher crypto
    if (NOT(${KEX} STREQUAL ecdh384))
      set(KEX ecdh384)
      message(&quot;KEX moved to higher crypto&quot;)
    endif()
</code></pre>

<h3 id="client-sdk-constants">Client SDK Constants<a class="headerlink" href="#client-sdk-constants" title="Permanent link">&para;</a></h3>
<h4 id="sdo_sdk_error">sdo_sdk_error<a class="headerlink" href="#sdo_sdk_error" title="Permanent link">&para;</a></h4>
<pre><code>typedef enum {
        SDO_RV_TIMEOUT = 1,
        SDO_CONN_TIMEOUT,
        SDO_DI_ERROR,
        SDO_TO1_ERROR,
        SDO_TO2_ERROR
} sdo_sdk_error;
</code></pre>

<p>The usage of this enum is detailed in sdo_sdk_init()</p>
<h4 id="sdo_sdk_status">sdo_sdk_status<a class="headerlink" href="#sdo_sdk_status" title="Permanent link">&para;</a></h4>
<pre><code>typedef enum {
        SDO_SUCCESS,
        SDO_INVALID_PATH,
        SDO_CONFIG_NOT_FOUND,
        SDO_INVALID_STATE,
        SDO_RESALE_NOT_SUPPORTED,
        SDO_RESALE_NOT_READY,
        SDO_WARNING,
        SDO_ERROR,
        SDO_ABORT
} sdo_sdk_status;
</code></pre>

<p>The usage of this enum is detailed in <code>sdo_sdk_init()</code></p>
<h4 id="sdo_sdk_device_state">sdo_sdk_device_state<a class="headerlink" href="#sdo_sdk_device_state" title="Permanent link">&para;</a></h4>
<pre><code>typedef enum {
        SDO_STATE_PRE_DI = 2,
        SDO_STATE_PRE_TO1,
        SDO_STATE_IDLE,
        SDO_STATE_RESALE,
        SDO_STATE_ERROR
} sdo_sdk_device_state;
</code></pre>

<p>The usage of this enum is detailed in <code>sdo_sdk_get_status()</code></p>
<h3 id="client-sdk-functions">Client SDK Functions<a class="headerlink" href="#client-sdk-functions" title="Permanent link">&para;</a></h3>
<p>The application resides in the app directory of the reference solution. The application uses the APIs specified in include/sdo.h to trigger the Ownership transfer state machine. The following lists the APIs which the application uses to perform Device Initialization or start Ownership Transfer Protocol.</p>
<h4 id="sdo_sdk_init">sdo_sdk_init()<a class="headerlink" href="#sdo_sdk_init" title="Permanent link">&para;</a></h4>
<pre><code>sdo_sdk_status sdo_sdk_init(sdo_sdk_errorCB error_handling_callback,
                            uint32_t num_modules,
                            sdo_sdk_service_info_module *module_information);
typedef int (*sdo_sdk_errorCB)(sdo_sdk_status type, sdo_sdk_error error_code);
</code></pre>

<p><em>Description</em><br />
This function initializes the Client SDK data structures. It allows the application to control the error handling of the Client SDK state machine by setting error_handling_callback. Client SDK calls error_handling_callback to propagate the error_code(sdo_sdk_error) back to the application with Client SDK internal status sdo_sdk_status(sdo_sdk_status). The application may handle the error and return the appropriate action to be taken by Client SDK further.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The reference application allows the Client SDK to retry for 5 times before calling abort</p>
</div>
<p>The Client SDK allows the owner to download the required Device Management System agents via Service Info mechanism; the num_modules and module_information registers the Service Info modules with the Client SDK.</p>
<p><em>Parameters</em><br />
<code>error_handling_callback:</code> It is of type sdo_sdk_errorCB<br />
<code>num_modules:</code> number of Service Info modules to register.<br />
<code>module_information:</code> Array of Service Info modules registration information  </p>
<p><em>Return Value</em><br />
<code>SDO_SUCCESS</code> for success.
Greater than <code>SDO_SUCCESS</code> for failure (refer sdo_sdk_status)</p>
<h4 id="sdo_sdk_run">sdo_sdk_run()<a class="headerlink" href="#sdo_sdk_run" title="Permanent link">&para;</a></h4>
<p><code>sdo_sdk_status sdo_sdk_run(void);</code></p>
<p><em>Description</em><br />
This function triggers either the Device Initialize state machine or Ownership Transfer Protocol state machine depending on the device status stored in Normal.blob.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The reference application first successful executions performs Device Initialization. The second execution begins to perform Ownership Transfer Protocol.</p>
</div>
<p><em>Parameters</em><br />
None  </p>
<p><em>Return Value</em><br />
<code>SDO_SUCCESS</code> for success.
Greater than <code>SDO_SUCCESS</code> for failure (refer sdo_sdk_status)</p>
<h4 id="sdo_sdk_resale">sdo_sdk_resale()<a class="headerlink" href="#sdo_sdk_resale" title="Permanent link">&para;</a></h4>
<p><code>sdo_sdk_status sdo_sdk_resale(void);</code></p>
<p><em>Description</em><br />
This function triggers the device resale.  </p>
<p><em>Parameters</em><br />
None  </p>
<p><em>Return Value</em><br />
<code>SDO_SUCCESS</code> for success.
Greater than <code>SDO_SUCCESS</code> for failure (refer sdo_sdk_status)</p>
<h4 id="sdo_sdk_get_status">sdo_sdk_get_status()<a class="headerlink" href="#sdo_sdk_get_status" title="Permanent link">&para;</a></h4>
<p><code>sdo_sdk_device_state sdo_sdk_get_status(void);</code></p>
<p><em>Description</em><br />
This function returns the current state of the device.  </p>
<p><em>Parameters</em><br />
None  </p>
<p><em>Return Value</em><br />
Please refer sdo_sdk_status:<br />
<code>SDO_STATE_PRE_DI:</code> Device is ready for DI<br />
<code>SDO_STATE_PRE_TO1:</code> Device is ready for Ownership transfer<br />
<code>SDO_STATE_IDLE:</code> Device's ownership transfer done<br />
<code>SDO_STATE_RESALE:</code> Device is ready for ownership transfer<br />
<code>SDO_STATE_ERROR:</code> Error in getting device status  </p>
<h2 id="crypto-subsystem-api">Crypto Subsystem API<a class="headerlink" href="#crypto-subsystem-api" title="Permanent link">&para;</a></h2>
<p>Cryptography support is a platform offering which enables Client SDK to generate random number, perform encryption, signing, sign verification and so on. The required functionality by the Client SDK is abstracted via a set of APIs declared in file "crypto/include/sdoCryptoHal.h" and "crypto/include/base64.h"</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section of the document specifies the internal APIs to abstract Crypto implementation from Client SDK and are subject to change.</p>
</div>
<h3 id="constants">Constants<a class="headerlink" href="#constants" title="Permanent link">&para;</a></h3>
<h4 id="sdo_crypto_hash_type">SDO_CRYPTO_HASH_TYPE<a class="headerlink" href="#sdo_crypto_hash_type" title="Permanent link">&para;</a></h4>
<pre><code>#define SDO_CRYPTO_HASH_TYPE_NONE      0
#define SDO_CRYPTO_HASH_TYPE_SHA_1     3
#define SDO_CRYPTO_HASH_TYPE_SHA_256   8
#define SDO_CRYPTO_HASH_TYPE_SHA_384  14
#define SDO_CRYPTO_HASH_TYPE_SHA_512  10
</code></pre>

<p>The usage of this define is detailed in <code>crypto_hal_hash()</code>.</p>
<h4 id="sdo_crypto_hmac_type">SDO_CRYPTO_HMAC_TYPE<a class="headerlink" href="#sdo_crypto_hmac_type" title="Permanent link">&para;</a></h4>
<pre><code>#define SDO_CRYPTO_HMAC_TYPE_SHA_256 108
#define SDO_CRYPTO_HMAC_TYPE_SHA_384 114
#define SDO_CRYPTO_HMAC_TYPE_SHA_512 110
</code></pre>

<p>The usage of this define is detailed in <code>crypto_hal_hmac()</code>.</p>
<h4 id="sdo_crypto_pub_key_encoding">SDO_CRYPTO_PUB_KEY_ENCODING<a class="headerlink" href="#sdo_crypto_pub_key_encoding" title="Permanent link">&para;</a></h4>
<pre><code>#define SDO_CRYPTO_PUB_KEY_ENCODING_NONE        0
#define SDO_CRYPTO_PUB_KEY_ENCODING_X509        1
#define SDO_CRYPTO_PUB_KEY_ENCODING_RSA_MOD_EXP 3
#define SDO_CRYPTO_PUB_KEY_ENCODING_EPID        4
</code></pre>

<p>The usage of this define is detailed in <code>crypto_hal_sig_verify()</code>.</p>
<h4 id="sdo_crypto_pub_key_algo">SDO_CRYPTO_PUB_KEY_ALGO<a class="headerlink" href="#sdo_crypto_pub_key_algo" title="Permanent link">&para;</a></h4>
<pre><code>#define SDO_CRYPTO_PUB_KEY_ALGO_NONE       0
#define SDO_CRYPTO_PUB_KEY_ALGO_RSA        1
#define SDO_CRYPTO_PUB_KEY_ALGO_DH         2
#define SDO_CRYPTO_PUB_KEY_ALGO_DSA        3
#define SDO_CRYPTO_PUB_KEY_ALGO_ECDSAp256 13
#define SDO_CRYPTO_PUB_KEY_ALGO_ECDSAp384 14
#define SDO_CRYPTO_PUB_KEY_ALGO_EPID_1_1  91
#define SDO_CRYPTO_PUB_KEY_ALGO_EPID_2_0  92
</code></pre>

<p>The usage of this define is detailed in <code>crypto_hal_sig_verify()</code>.</p>
<h4 id="sdo_pk_hash">SDO_PK_HASH<a class="headerlink" href="#sdo_pk_hash" title="Permanent link">&para;</a></h4>
<pre><code>#define SDO_PK_HASH_NONE    0
#define SDO_PK_HASH_SHA1    3
#define SDO_PK_HASH_SHA256  8
#define SDO_PK_HASH_SHA512 10
#define SDO_PK_HASH_SHA384 14
</code></pre>

<p>The usage of this define is detailed in <code>crypto_hal_rsa_encrypt()</code>.</p>
<h3 id="structures">Structures<a class="headerlink" href="#structures" title="Permanent link">&para;</a></h3>
<h4 id="sdo_byte_array_t">sdo_byte_array_t<a class="headerlink" href="#sdo_byte_array_t" title="Permanent link">&para;</a></h4>
<pre><code>typedef struct {
        size_t byte_sz;
        uint8_t * bytes;
} sdo_bits_t;
typedef sdo_bits_t sdo_byte_array_t;
</code></pre>

<p>The usage is detailed in <code>crypto_hal_get_device_csr()</code>.</p>
<h3 id="initialization-and-exit-functions">Initialization and Exit Functions<a class="headerlink" href="#initialization-and-exit-functions" title="Permanent link">&para;</a></h3>
<h4 id="crypto_init">crypto_init()<a class="headerlink" href="#crypto_init" title="Permanent link">&para;</a></h4>
<p><code>int32_t crypto_init(void)</code></p>
<p><em>Description</em><br />
This function initializes and enables the crypto services to be used by Client SDK.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a change in implementation for porting to a custom platform. For guidance in assessing the secure random number generation requirements for your device, refer to the Client SDK Security Implications document.</p>
</div>
<p><em>Parameters</em><br />
None  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure   </p>
<h4 id="crypto_close">crypto_close()<a class="headerlink" href="#crypto_close" title="Permanent link">&para;</a></h4>
<p><code>int32_t crypto_close(void)</code></p>
<p><em>Description</em><br />
This function tears down any initialization done to enable crypto services to Client SDK.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a change in implementation for porting to custom platform, as it tears down the initialization done in <code>crypto_init()</code>. Also, the crypto tear down could be different for custom platforms.</p>
</div>
<p><em>Parameters</em><br />
None  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure  </p>
<h3 id="random-number-functions">Random Number Functions<a class="headerlink" href="#random-number-functions" title="Permanent link">&para;</a></h3>
<h4 id="random_init">random_init()<a class="headerlink" href="#random_init" title="Permanent link">&para;</a></h4>
<p><code>int random_init(void)</code></p>
<p><em>Description</em>
This function initializes the random number generator functionality.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a change in implementation for porting to a custom platform. For guidance in assessing the secure random number generation requirements for your device, refer to the Client SDK Security Implications document.</p>
</div>
<p><em>Parameters</em><br />
None  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h4 id="random_close">random_close()<a class="headerlink" href="#random_close" title="Permanent link">&para;</a></h4>
<p><code>int random_close(void)</code></p>
<p><strong>Description</strong><br />
This function releases the random number context. After this call, the random number cannot be retrieved from a call to <code>crypto_hal_random_bytes()</code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a change in implementation for porting to custom platform, as it tears down the initialization done to setup random number generator which may be different in custom platform</p>
</div>
<p><strong>Parameters</strong><br />
None  </p>
<p><strong>Return Value</strong><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h4 id="crypto_hal_random_bytes">crypto_hal_random_bytes()<a class="headerlink" href="#crypto_hal_random_bytes" title="Permanent link">&para;</a></h4>
<p><code>int32_t crypto_hal_random_bytes(uint8_t *random_buffer, size_t num_bytes)</code></p>
<p><em>Description</em><br />
This function fills the random_buffer with random number of size num_bytes.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses standard mbedTLS/openSSL APIs</p>
</div>
<p><strong>Parameters</strong><br />
<code>random_buffer:</code> pointer to memory to receive random number<br />
<code>num_bytes:</code> size of memory pointed by random_buffer indicating the bytes of random number requested.</p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h3 id="message-digest-and-mac-functions">Message Digest and MAC Functions<a class="headerlink" href="#message-digest-and-mac-functions" title="Permanent link">&para;</a></h3>
<h4 id="crypto_hal_hash">crypto_hal_hash()<a class="headerlink" href="#crypto_hal_hash" title="Permanent link">&para;</a></h4>
<pre><code>int32_t crypto_hal_hash(uint8_t hash_type, const uint8_t *buffer,
                         size_t buffer_length, uint8_t *output,
                         size_t output_length)
</code></pre>

<p><em>Description</em><br />
This function hashes the contents of the memory pointed to by buffer of size <code>buffer_length</code> with <code>hash_type</code> algorithm and fills the memory pointed to by <code>output</code> of size <code>output_length</code> with generated hash.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses standard mbedTLS/openSSL APIs</p>
</div>
<p><em>Parameters</em><br />
<code>hash_type:</code> This function must support all the hash algorithms identifiers mentioned in SDO_CRYPTO_HASH_TYPE except SDO_CRYPTO_HASH_TYPE_SHA_512 (optional). Client SDK uses SDO_CRYPTO_HASH_TYPE_USED to decide at compile time which hash_type to use - either SDO_CRYPTO_HASH_TYPE_SHA_256 or SDO_CRYPTO_HASH_TYPE_SHA_384.<br />
<code>buffer:</code> a valid pointer to a memory containing data to be hashed<br />
<code>buffer_length:</code> size of memory pointed to by buffer<br />
output: a valid pointer to a memory which will be filled by hash<br />
<code>output_length:</code> size of the memory pointed to by output. It must be able to contain the generated Hash.  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h4 id="crypto_hal_hmac">crypto_hal_hmac()<a class="headerlink" href="#crypto_hal_hmac" title="Permanent link">&para;</a></h4>
<pre><code>int32_t crypto_hal_hmac(uint8_t hmac_type, const uint8_t *buffer,
                        size_t buffer_length, uint8_t *output,
                        size_t output_length, const uint8_t *key,
                        size_t key_length)
</code></pre>

<p><em>Description</em>
This function HMACs the contents of the memory pointed to by buffer of size <code>buffer_length</code> using <code>key</code> of size <code>key_length</code>, with <code>hmac_type</code> algorithm and fills the memory pointed to by <code>output</code> of size <code>output_length</code> with generated HMAC. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses standard mbedTLS/openSSL APIs</p>
</div>
<p><em>Parameters</em><br />
<code>hmac_type</code>: This function must support all the HMAC algorithms identifiers mentioned in SDO_CRYPTO_HMAC_TYPE except SDO_CRYPTO_HMAC_TYPE_SHA_512 (optional).  Client SDK uses SDO_CRYPTO_HMAC_TYPE_USED to decide at compile time which hmac_type to use - either SDO_CRYPTO_HMAC_TYPE_SHA_256 or SDO_CRYPTO_HMAC_TYPE_SHA_384.<br />
<code>buffer:</code> a valid pointer to a memory containing data to be HMACed.<br />
<code>buffer_length:</code> size of memory pointed to by buffer<br />
<code>output:</code> a valid pointer to a memory which will be filled by HMACed data.<br />
<code>output_length:</code> size of the memory pointed to by output. It must be able to contain the generated HMAC.  </p>
<p><em>Return Value</em>
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h3 id="asymmetric-functions">Asymmetric Functions<a class="headerlink" href="#asymmetric-functions" title="Permanent link">&para;</a></h3>
<h4 id="crypto_hal_sig_verify">crypto_hal_sig_verify()<a class="headerlink" href="#crypto_hal_sig_verify" title="Permanent link">&para;</a></h4>
<pre><code>int32_t crypto_hal_sig_verify(uint8_t key_encoding, uint8_t key_algorithm,
                              const uint8_t *message, uint32_t message_length,
                              const uint8_t *message_signature,
                              uint32_t signature_length,
                              const uint8_t *key_param1,
                              uint32_t key_param1Length,
                              const uint8_t *key_param2,
                              uint32_t key_param2Length)
</code></pre>

<p><em>Description</em><br />
This function verifies the ECDSA or RSA signature pointed by <code>message_signature</code> of size <code>message_length</code> on the data pointed by <code>message</code> of size <code>message_length</code> with the key material <code>key_param1</code> and <code>key_param2</code> interpreted according to <code>key_encoding</code>.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses standard mbedTLS/openSSL APIs</p>
</div>
<p><em>Parameters</em><br />
<code>key_encoding:</code> SDO_CRYPTO_PUB_KEY_ENCODING_X509 encoding is used for ECDSA and SDO_CRYPTO_PUB_KEY_ENCODING_RSA_MOD_EXP is used for RSA. Please refer SDO_CRYPTO_PUB_KEY_ENCODING<br />
<code>key_algorithm:</code> SDO_CRYPTO_PUB_KEY_ALGO_(ECDSAp256/ECDSAp384) is used for ECDSA and SDO_CRYPTO_PUB_KEY_ALGO_RSA for RSA. Please refer SDO_CRYPTO_PUB_KEY_ALGO<br />
<code>message:</code> data over which the sign verification needs to be performed.<br />
<code>message_length:</code> size of the message<br />
<code>message_signature:</code> signature over the message sent by the signing entity<br />
<code>signature_length:</code> size of the message_signature<br />
<code>key_param1:</code> either ECDSA key or RSA Modulus<br />
<code>key_param1Length:</code> size of the key in key_param1<br />
<code>key_param2:</code> NULL for ECDSA or Public Exponent for RSA<br />
<code>key_param2Length:</code> size of the key in key_param2  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h4 id="crypto_hal_ecdsa_sign">crypto_hal_ecdsa_sign()<a class="headerlink" href="#crypto_hal_ecdsa_sign" title="Permanent link">&para;</a></h4>
<pre><code>int32_t crypto_hal_ecdsa_sign(const uint8_t *message, size_t message_len,
                       unsigned char *signature, size_t *signature_len)
</code></pre>

<p><em>Description</em>
This function signs the <code>message</code> of size <code>message_len</code> and fills the signed data in <code>signature</code> of size <code>signature_len</code>. </p>
<ul>
<li>Algorithm is based on the compile time flags ECDSA256_DA and ECDSA384_DA.</li>
<li>Signing Key is loaded from filesystem stored at location ECDSA_PRIVKEY.</li>
<li>Signature Length is allocated by Client SDK based on internal define ECDSA_SIGNATURE_MAX_LEN.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses standard mbedTLS/openSSL APIs</p>
</div>
<p><em>Parameters</em><br />
<code>message:</code> The message over which sign is to be calculated.<br />
<code>message_length:</code> size of the message<br />
<code>signature:</code> The buffer to fill signature with.<br />
<code>signature_len:</code> size of the signature  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h4 id="crypto_hal_rsa_encrypt">crypto_hal_rsa_encrypt()<a class="headerlink" href="#crypto_hal_rsa_encrypt" title="Permanent link">&para;</a></h4>
<pre><code>int32_t crypto_hal_rsa_encrypt(uint8_t hash_type, uint8_t key_encoding,
                               uint8_t key_algorithm, const uint8_t *clear_text,
                               uint32_t clear_text_length, uint8_t *cipher_text,
                               uint32_t cipher_text_length,
                               const uint8_t *key_param1,
                               uint32_t key_param1Length,
                               const uint8_t *key_param2,
                               uint32_t key_param2Length)
</code></pre>

<p><em>Description</em><br />
This function encrypts the <code>clear_text</code> of size <code>clear_text_length</code> with the RSA algorithm using key material <code>key_param1</code> and <code>key_param2</code>.   </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses standard mbedTLS/openSSL APIs</p>
</div>
<p><em>Parameters</em><br />
<code>hash_type:</code> mandatory support required for SDO_PK_HASH_SHA256. Please refer SDO_PK_HASH<br />
<code>key_encoding:</code> SDO_CRYPTO_PUB_KEY_ENCODING_RSA_MOD_EXP. Please refer SDO_CRYPTO_PUB_KEY_ENCODING<br />
<code>key_algorithm:</code> SDO_CRYPTO_PUB_KEY_ALGO_RSA. Please refer SDO_CRYPTO_PUB_KEY_ALGO<br />
<code>clear_text:</code> pointer to the text to be encrypted<br />
<code>clear_text_length:</code> size of the clear_text<br />
<code>cipher_text:</code> pointer to the empty buffer to be filled after encrypting clear_text<br />
<code>cipher_text_length:</code> size of buffer pointed by cipher_text. Please refer the Return value section of this function or <code>crypto_hal_rsa_len()</code><br />
<code>key_param1:</code> RSA Modulus<br />
<code>key_param1Length:</code> size of RSA Modulus<br />
<code>key_param2:</code> Public Exponent for RSA<br />
<code>key_param2Length:</code> size of Public Exponent for RSA  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure  </p>
<h4 id="crypto_hal_rsa_len">crypto_hal_rsa_len()<a class="headerlink" href="#crypto_hal_rsa_len" title="Permanent link">&para;</a></h4>
<pre><code>uint32_t crypto_hal_rsa_len(const uint8_t *key_param1,
                            uint32_t key_param1Length,
                            const uint8_t *key_param2,
                            uint32_t key_param2Length)
</code></pre>

<p><strong>Description</strong><br />
This function returns the size of encrypted text using RSA algorithm which uses the key material key_param1 and key_param2.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses standard mbedTLS/openSSL APIs</p>
</div>
<p><strong>Parameters</strong><br />
<code>key_param1:</code> RSA Modulus<br />
<code>key_param1Length:</code> size of RSA Modulus<br />
<code>key_param2:</code> Public Exponent for RSA<br />
<code>key_param2Length:</code> size of Public Exponent for RSA  </p>
<p><strong>Return Value</strong><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h3 id="symmetric-cipher-functions">Symmetric Cipher Functions<a class="headerlink" href="#symmetric-cipher-functions" title="Permanent link">&para;</a></h3>
<h4 id="crypto_hal_aes_encrypt">crypto_hal_aes_encrypt()<a class="headerlink" href="#crypto_hal_aes_encrypt" title="Permanent link">&para;</a></h4>
<pre><code>int32_t crypto_hal_aes_encrypt(const uint8_t *clear_text,
                               uint32_t clear_text_length, uint8_t *cipher_text,
                               uint32_t *cipher_length, size_t block_size,
                               const uint8_t *iv, const uint8_t *key,
                               uint32_t key_length)
</code></pre>

<p><em>Description</em><br />
This function encrypts the <code>clear_text</code> of size <code>clear_text_length</code> with the AES algorithm using <code>key</code> of size <code>key_length</code> and fills the <code>cipher_text</code> with encrypted content of size <code>cipher_length</code>.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses standard mbedTLS/openSSL APIs</p>
</div>
<p><em>Parameters</em><br />
<code>clear_text:</code> pointer to the buffer containing text to be encrypted<br />
<code>clear_text_length:</code> size of clear_text<br />
<code>cipher_text:</code> pointer to the empty buffer to be filled after encrypting clear_text<br />
<code>cipher_length:</code> size of buffer pointed by cipher_text. This is IN/OUT parameter and gets filled with size of expected encrypted buffer in case cipher_text is passed as NULL with all other parameters as valid.<br />
<code>block_size:</code> is 16 in case of AES CBC encrypt<br />
iv: Initialization Vector of size 16 bytes. Counter management is to be done by the caller for AES CTR mode.<br />
<code>key:</code> AES symmetric key<br />
<code>key_length:</code> size of the key<br />
<strong>Return Value</strong><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h4 id="crypto_hal_aes_decrypt">crypto_hal_aes_decrypt()<a class="headerlink" href="#crypto_hal_aes_decrypt" title="Permanent link">&para;</a></h4>
<pre><code>int32_t crypto_hal_aes_decrypt(uint8_t *clear_text, uint32_t *clear_text_length,
                               const uint8_t *cipher_text,
                               uint32_t cipher_length, size_t block_size,
                               const uint8_t *iv, const uint8_t *key,
                               uint32_t key_length)
</code></pre>

<p><em>Description</em><br />
This function decrypts the <code>cipher_text</code> of size <code>cipher_length</code> with the AES algorithm using <code>key</code> of size <code>key_length</code> and fills the <code>clear_text</code> with unencrypted content of length <code>clear_text_lengt</code>h.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses standard mbedTLS/openSSL APIs</p>
</div>
<p><em>Parameters</em><br />
<code>clear_text:</code> pointer to the empty buffer to be filled with unencrypted text<br />
<code>clear_text_length:</code> size of clear_text. This is IN/OUT parameter and gets filled with size of expected unencrypted buffer in case clear_text is passed as NULL with all other parameters as valid.<br />
<code>cipher_text:</code> pointer to the buffer containing text to be decrypted.<br />
cipher_length:<code>size of cipher_text.</code>block_size:<code>is 16 in case of AES CBC encrypt</code>iv:<code>Initialization Vector of size 16 bytes. Counter management is to be done by the caller for AES CTR mode.</code>key:<code>AES symmetric key</code>key_length:` size of the key  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h3 id="certificate-signing-request">Certificate Signing Request<a class="headerlink" href="#certificate-signing-request" title="Permanent link">&para;</a></h3>
<h4 id="crypto_hal_get_device_csr">crypto_hal_get_device_csr()<a class="headerlink" href="#crypto_hal_get_device_csr" title="Permanent link">&para;</a></h4>
<pre><code>int32_t crypto_hal_get_device_csr(sdo_byte_array_t **csr);
</code></pre>

<p><em>Description</em><br />
This function fills the Client SDK byte array <code>csr</code> with the Certificate Signing Request (CSR) data.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses the standard mbedTLS/openSSL APIs</p>
</div>
<p><em>Parameters</em><br />
<code>csr:</code> SDO byte array. Please refer sdo_byte_array_t. The usage of the structure is as below:<br />
- byte_sz: size of the buffer in bytes pointed by bytes<br />
- bytes: pointer to a stream of bytes<br />
This array is allocated by using sdo_byte_array_alloc(size_of_buffer) function.</p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h3 id="key-exchange-functions">Key Exchange Functions<a class="headerlink" href="#key-exchange-functions" title="Permanent link">&para;</a></h3>
<h4 id="crypto_hal_kex_init">crypto_hal_kex_init()<a class="headerlink" href="#crypto_hal_kex_init" title="Permanent link">&para;</a></h4>
<pre><code>int32_t crypto_hal_kex_init(void **context)
</code></pre>

<p><em>Description</em><br />
Client SDK uses DH, ECDH and Asym algorithms to perform key exchange for creating a secure channel between Device and Owner. The configurations are mentioned in Crypto Configuration. The Device is considered as entity B in Key Exchange and the Owner is considered as entity A.  </p>
<p><strong>DH:</strong> This function creates a Key Exchange context by generating a DH key pair. In the later part of Client SDK execution, the public part of the key pair is retrieved using <code>crypto_hal_get_device_random()</code> and sent to the owner for generating the shared secret.  </p>
<p><strong>ECDH:</strong> This function creates an ECDH key pair. It then appends a random number with the public part of the generated key pair to generate a stream of bytes known as Device Random as mentioned below.<br />
<code>ByteArray[blen(Qx), Qx, blen(Qy), Qy, blen(DeviceRandom), Random Number]</code></p>
<p>The random number as mentioned above is of size 16 bytes (ECDH256) or 48 bytes (ECDH384).
In the later part of Client SDK execution, this buffer is retrieved using <code>crypto_hal_get_device_random()</code> and sent to the owner for generating the shared secret.  </p>
<p><strong>ASYM:</strong> This function generates a random number of 32 bytes to be used later in the key exchange. 
As part of Client SDK Ownership Transfer Protocol, the context gets filled in with Owner public key which is used to encrypt this random number. This key exchange is only valid if the owner certificate uses RSA algorithm. This encryption is abstracted with a set of APIs which dont directly call openssl/mbedTLS APIs. The buffer to be sent to owner is retrieved by calling <code>crypto_hal_get_device_random()</code>.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses standard mbedTLS/openSSL APIs</p>
</div>
<p><em>Parameters</em><br />
<code>context:</code> a valid pointer to store the key exchange context.  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h4 id="crypto_hal_kex_close">crypto_hal_kex_close()<a class="headerlink" href="#crypto_hal_kex_close" title="Permanent link">&para;</a></h4>
<p><code>int32_t crypto_hal_kex_close(void **context)</code></p>
<p><em>Description</em><br />
This function tears down the key exchange context created by <code>crypto_hal_kex_init()</code>.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses standard mbedTLS/openSSL APIs</p>
</div>
<p><em>Parameters</em><br />
<code>context:</code> a valid pointer of key exchange context.  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h4 id="crypto_hal_get_device_random">crypto_hal_get_device_random()<a class="headerlink" href="#crypto_hal_get_device_random" title="Permanent link">&para;</a></h4>
<pre><code>int32_t crypto_hal_get_device_random(void *context, uint8_t *dev_rand_value,
                                     uint32_t *dev_rand_length)  
</code></pre>

<p><em>Description</em><br />
This function fills the buffer pointed to by dev_rand_value of size dev_rand_length with the Device Random Value. The Device Random value is generated differently for different algorithms.  </p>
<p><strong>DH:</strong> The public part of the key pair is the Device Random, which is generated in call to <code>crypto_hal_kex_init()</code>.  </p>
<p><strong>ECDH:</strong> The buffer generated in <code>crypto_hal_kex_init()</code> is the Device Random.  </p>
<p><strong>ASYM:</strong> The buffer generated is abstracted out by Client SDK. The values are retrieved from key_ex_data-&gt;_publicB and key_ex_data-&gt;_publicB_length  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses standard mbedTLS/openSSL APIs or internal data structures which can be reused.  </p>
</div>
<p><em>Parameters</em><br />
<code>context:</code> a valid pointer of key exchange context.<br />
<code>dev_rand_value:</code> A valid pointer to an empty buffer. If this parameter is passed as NULL, then this function returns the size of the Device Random in dev_rand_length.<br />
<code>dev_rand_length:</code> The size of the buffer pointed by dev_rand_value.  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h4 id="crypto_hal_set_peer_random">crypto_hal_set_peer_random()<a class="headerlink" href="#crypto_hal_set_peer_random" title="Permanent link">&para;</a></h4>
<pre><code>int32_t crypto_hal_set_peer_random(void *context,
                                   const uint8_t *peer_rand_value,
                                   uint32_t peer_rand_length)
</code></pre>

<p><em>Description</em><br />
This function updates the key exchange context with <code>peer_rand_value</code> of size <code>peer_rand_length</code>. This function uses this information to generate shared secret.  </p>
<p><strong>DH:</strong> This generates the key using the standard Diffie Hellman mechanism A<sup>b</sup> mod p. A is the owner data.  </p>
<p><strong>ECDH:</strong> The Owner sends the data in a similar buffer layout as device sends it. Please see <code>crypto_hal_kex_init()</code> for the device Key Exchange buffer layout.<br />
<code>ByteArray[blen(Ax), Ax, blen(Ay), Ay, blen(OwnerRandom), OwnerRandom]</code> </p>
<p>This function fills the point Qp with the Owner Information and generates an ECDH key pair. The shared secret is generated as:<br />
<code>Shx ||DeviceRandom||OwnerRandom</code>  </p>
<p><strong>ASYM</strong> The shared secret is generated as:<br />
<code>DeviceRandom || OwnerRandom</code>  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses standard mbedTLS/openSSL APIs</p>
</div>
<p><em>Parameters</em><br />
<code>context:</code> a valid pointer of key exchange context.<br />
<code>peer_rand_value:</code> a valid pointer to Owner data for generating shared secret.<br />
<code>peer_rand_length:</code> The size of the buffer pointed by peer_rand_value.  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h4 id="crypto_hal_get_secret">crypto_hal_get_secret()<a class="headerlink" href="#crypto_hal_get_secret" title="Permanent link">&para;</a></h4>
<pre><code>int32_t crypto_hal_get_secret(void *context, uint8_t *secret,
                              uint32_t *secret_length)
</code></pre>

<p><em>Description</em><br />
This function returns the shared secret created as part of key exchange protocol by <code>crypto_hal_set_peer_random()</code>.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses the internal structure members which gets filled in Key Exchange protocol.  </p>
</div>
<p><em>Parameters</em><br />
<code>context:</code> a valid pointer of key exchange context.<br />
<code>secret:</code> A valid pointer to an empty buffer. If this parameter is passed as NULL, then this function returns the size of the secret in secret_length.<br />
<code>secret_length:</code> The size of the buffer pointed by secret.  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h3 id="base64">Base64<a class="headerlink" href="#base64" title="Permanent link">&para;</a></h3>
<p>Client SDK uses base64 to send and receive the data from the connected servers. The following set of APIs are declared in crypto/include/base64.h.  </p>
<h4 id="bin_tob64length">bin_toB64Length<a class="headerlink" href="#bin_tob64length" title="Permanent link">&para;</a></h4>
<pre><code>int bin_toB64Length(int bin_length)  
</code></pre>

<p><em>Description</em><br />
This function returns the base64 length corresponding to non-encoded <code>bin_length</code>.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses standard mbedTLS/openSSL APIs  </p>
</div>
<p><em>Parameters</em><br />
<code>bin_length:</code> the size of the data to be encoded in base64.</p>
<p><em>Return Value</em><br />
Integer returning the base64 encoded length</p>
<h4 id="b64to_bin_length">b64To_bin_length<a class="headerlink" href="#b64to_bin_length" title="Permanent link">&para;</a></h4>
<pre><code>int b64To_bin_length(int b64Len);
</code></pre>

<p><em>Description</em><br />
This function returns the decoded length corresponding to base64 encoded length identified by <code>b64Len</code>.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses standard mbedTLS/openSSL APIs  </p>
</div>
<p><em>Parameters</em><br />
<code>b64Len:</code> the size of the data to be decoded from base64.  </p>
<p><em>Return Value</em><br />
Integer returning the base64 decoded length  </p>
<h4 id="bin_tob64">bin_toB64<a class="headerlink" href="#bin_tob64" title="Permanent link">&para;</a></h4>
<pre><code>int bin_toB64(size_t bin_length, uint8_t *bin_bytes, size_t bin_offset,
              size_t b64Len, uint8_t *b64Bytes, size_t b64Offset)
</code></pre>

<p><em>Description</em><br />
This function encodes the data into base64 pointed to by <code>bin_bytes</code> of size <code>bin_length</code> at offset <code>bin_offset</code> and fills the encoded data in <code>b64Bytes</code> of size <code>b64Len</code> at offset <code>b64Offset</code>.  </p>
<p><em>Parameters</em><br />
<code>bin_length:</code> number of bytes pointed by bin_bytes to be encoded in base64<br />
<code>bin_bytes:</code> buffer containing data to be encoded into base64<br />
<code>bin_offset:</code> offset from bin_bytes from where encoding should begin<br />
<code>b64Len:</code> size of b64Bytes. It must be at least b64Offset + bin_toB64Length(bin_length) bytes<br />
<code>b64Bytes:</code> empty buffer to receive base64 encoded data<br />
<code>b64Offset:</code> base64 encoded data must be filled at b64Bytes + b64Offset  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses standard mbedTLS/openSSL APIs</p>
</div>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h4 id="b64to_bin">b64To_bin<a class="headerlink" href="#b64to_bin" title="Permanent link">&para;</a></h4>
<pre><code>int b64To_bin(size_t b64Len, uint8_t *b64bytes, size_t b64Offset,
              size_t bin_len, uint8_t *bin_bytes, size_t bin_offset)
</code></pre>

<p><em>Description</em><br />
This function decodes the base64 data pointed to by <code>b64bytes</code> of size <code>b64Len</code> at offset <code>b64Offset</code> and fills the decoded data in <code>bin_bytes</code> of size <code>bin_length</code> at offset <code>bin_offset</code>  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation uses standard mbedTLS/openSSL APIs</p>
</div>
<p><em>Parameters</em><br />
<code>b64Len:</code> number of bytes pointed by b64Bytes to be decoded from base64<br />
<code>b64Bytes:</code> pointer to base64 encoded data<br />
<code>b64Offset:</code> offset from b64Bytes where the base64 decoding to begin.<br />
<code>bin_length:</code> size bin_bytes. It must be at least bin_offset + b64To_bin_length(b64Len) bytes<br />
<code>bin_bytes:</code> empty buffer to be filled with decoded base64 data<br />
<code>bin_offset:</code> base64 decoded data must be filled at bin_bytes + bin_offset  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure 
</p>
<h2 id="network-subsystem-api">Network Subsystem API<a class="headerlink" href="#network-subsystem-api" title="Permanent link">&para;</a></h2>
<p>Networking is a platform offering which enables Client SDK to connect to Manufacturer, Rendezvous and Owner over the network. The required functionality by the Client SDK is abstracted via a set of APIs declared in file "network/include/network_al.h".
Client SDK communicates with Manufacturer, Rendezvous and Owner using REST API. It is not a constraint on the APIs, and the APIs could well be defined to communicate over any protocol.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section of the document specifies the internal APIs to abstract Network implementation from Client SDK and are subject to change.</p>
</div>
<h3 id="constants_1">Constants<a class="headerlink" href="#constants_1" title="Permanent link">&para;</a></h3>
<h4 id="ipv4_addr_len">IPV4_ADDR_LEN<a class="headerlink" href="#ipv4_addr_len" title="Permanent link">&para;</a></h4>
<p><code>#define IPV4_ADDR_LEN 4</code></p>
<p>The Client SDK uses this define for IPv4 IP address. For usage, please refer <code>sdo_con_dns_lookup()</code></p>
<h4 id="sdo_type_error">SDO_TYPE_ERROR<a class="headerlink" href="#sdo_type_error" title="Permanent link">&para;</a></h4>
<p><code>#define SDO_TYPE_ERROR 255</code></p>
<p>The Client SDK uses this to indicate error. For usage, please refer <code>sdo_con_recv_msg_header()</code></p>
<h3 id="data-types">Data Types<a class="headerlink" href="#data-types" title="Permanent link">&para;</a></h3>
<h4 id="sdo_ip_address_t">sdo_ip_address_t<a class="headerlink" href="#sdo_ip_address_t" title="Permanent link">&para;</a></h4>
<p>This defines the IP address structure used to pass IP address information within Client SDK. The usage of the structure is detailed in <code>sdo_con_dns_lookup()</code></p>
<pre><code>typedef struct {
        uint8_t length;
        uint8_t addr[16];
} sdo_ip_address_t;
</code></pre>

<h4 id="sdo_con_handle">sdo_con_handle<a class="headerlink" href="#sdo_con_handle" title="Permanent link">&para;</a></h4>
<p>sdo_con_handle is specific to the underlying network library. In software distributions supporting POSIX, sdo_con_handle can be int or any implementation specific datatype. For Client SDK, this is opaque data type, and it will not use its internal members.</p>
<h3 id="connection-management-functions">Connection Management Functions<a class="headerlink" href="#connection-management-functions" title="Permanent link">&para;</a></h3>
<h4 id="sdo_con_setup">sdo_con_setup()<a class="headerlink" href="#sdo_con_setup" title="Permanent link">&para;</a></h4>
<pre><code>int32_t sdo_con_setup(char *medium, char **params, uint32_t count)
</code></pre>

<p><em>Description</em><br />
This function sets up the connection identified by <code>medium</code> based on the <code>count</code> number of <code>params</code>. It is expected that this call will block until the interface has been established and is stable.
It may be called multiple times, and if in subsequent calls to this function, the medium value changes, the existing connection must be terminated, and a new connection must be created on new medium. If the medium is the same as used in existing connection, this function must continue to retain the previous setup connection.  </p>
<table>
<thead>
<tr>
<th align="center"><strong>Medium</strong></th>
<th align="center"><strong>Meaning</strong></th>
<th align="center"><strong>params</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">NULL</td>
<td align="center">Connect to any available network interface.</td>
<td align="center">NULL</td>
</tr>
<tr>
<td align="center">eth*</td>
<td align="center">Connect to any available Ethernet interface.</td>
<td align="center">NULL</td>
</tr>
<tr>
<td align="center">eth09</td>
<td align="center">Connect to the specified numbered Ethernet interface.</td>
<td align="center">NULL</td>
</tr>
<tr>
<td align="center">wifi*</td>
<td align="center">Connect to any available WiFi interface.</td>
<td align="center">NULL</td>
</tr>
<tr>
<td align="center">wifi</td>
<td align="center">Connect to the WiFi SSID and password specified by params.</td>
<td align="center">params[0] = SSID</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In existing implementation, Client SDK calls this function with medium as NULL and params as NULL and initializes REST API handling context.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation initializes REST context which is used to communicate with Manufacturer/Rendezvous/Owner Server</p>
</div>
<p><em>Parameters</em><br />
<code>medium:</code> Refer above table<br />
<code>params:</code> NULL or an array of NULL terminated ASCII strings required to connect to medium.<br />
<code>count:</code> 0 or number of NULL terminated ASCII strings in params  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h4 id="sdo_con_teardown">sdo_con_teardown()<a class="headerlink" href="#sdo_con_teardown" title="Permanent link">&para;</a></h4>
<pre><code>int32_t sdo_con_teardown(void)

</code></pre>

<p><em>Description</em><br />
This function shuts down the connection established by the function described in <code>sdo_con_setup()</code> </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may not require a change in implementation for porting to custom platform, as the reference implementation tears down the REST context created in <code>sdo_con_setup()</code></p>
</div>
<p><em>Parameters</em><br />
None </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h4 id="sdo_con_dns_lookup">sdo_con_dns_lookup()<a class="headerlink" href="#sdo_con_dns_lookup" title="Permanent link">&para;</a></h4>
<pre><code>int32_t sdo_con_dns_lookup(const char *url, sdo_ip_address_t **ip_list,
                           uint32_t *ip_list_size)
</code></pre>

<p><em>Description</em><br />
This function perform a DNS lookup for the specified host identified by the <code>url</code> and return a list of IP addresses in the <code>ip_list</code>.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a minimal change in implementation for porting to custom platform, as the reference implementation relies on Linux libraries to perform Domain Name resolution.</p>
</div>
<p><em>Parameters</em><br />
<code>url:</code> NULL terminated string like 192.168.0.1 or example@noname.com<br />
<code>ip_list:</code> Refer sdo_ip_address_t for the structure declaration. The usage of this structure is as follows:<br />
- <code>length:</code> The value should be 4 for IPv4 and 16 for IPv6 addresses<br />
- <code>addr:</code> specifies the IP address in network byte order  </p>
<p><code>ip_list_size:</code> specifies the number of IP addresses in the ip_list.  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h4 id="sdo_con_connect">sdo_con_connect()<a class="headerlink" href="#sdo_con_connect" title="Permanent link">&para;</a></h4>
<pre><code>sdo_con_handle sdo_con_connect(sdo_ip_address_t *addr, uint16_t port,
                               void **ssl)
</code></pre>

<p><em>Description</em><br />
This function connects to the IP address specified in addr on the given port. If the ssl pointer is non-NULL, enable SSL on the opened socket.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a minimal change in implementation for porting to custom platform, as the reference implementation relies on Linux libraries to connect to the server.</p>
</div>
<p><em>Parameters</em><br />
<code>addr:</code> server IP address. Please refer <code>sdo_con_dns_lookup()</code><br />
<code>port:</code> server port to connect to<br />
<code>ssl:</code> NULL or valid pointer to receive the ssl context in case ssl is enabled</p>
<p><em>Return Value</em><br />
Connection handle for success. Please refer sdo_con_handle.<br />
<code>-1</code> for failure </p>
<h4 id="sdo_con_disconnect">sdo_con_disconnect()<a class="headerlink" href="#sdo_con_disconnect" title="Permanent link">&para;</a></h4>
<pre><code>int32_t sdo_con_disconnect(sdo_con_handle handle, void *ssl)
</code></pre>

<p><em>Description</em><br />
This function terminates the connection associated with handle.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a minimal change in implementation for porting to custom platform, as the reference implementation relies on Linux libraries to disconnect from the server.</p>
</div>
<p><em>Parameters</em><br />
<code>handle:</code> Valid connection handle. Please refer to <code>sdo_con_connect()</code><br />
<code>ssl:</code> NULL or valid pointer in case, SSL connection was established. Please refer to <code>sdo_con_connect()</code>  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h3 id="connection-data-management-functions">Connection Data Management Functions<a class="headerlink" href="#connection-data-management-functions" title="Permanent link">&para;</a></h3>
<h4 id="sdo_con_recv_msg_header">sdo_con_recv_msg_header()<a class="headerlink" href="#sdo_con_recv_msg_header" title="Permanent link">&para;</a></h4>
<pre><code>int32_t sdo_con_recv_msg_header(sdo_con_handle handle,
                                uint32_t *protocol_version,
                                uint32_t *message_type, uint32_t *msglen,
                                void *ssl)
</code></pre>

<p><em>Description</em><br />
This function receives the message header on the specified connection handle and returns <code>protocol_version</code>, <code>message_type</code> and <code>msglen</code>. It will block until a message is available.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a minimal change in implementation for porting to custom platform, as the reference implementation relies on Linux* libraries to receive data from the server.</p>
</div>
<p><em>Parameters</em><br />
<code>handle:</code> Connection handle. Please refer to <code>sdo_con_connect()</code><br />
<code>protocol_version:</code> Incoming protocol version. Client SDK supports 113<br />
<code>message_type:</code> set to SDO_TYPE_ERROR in case of error. Please refer SDO_TYPE_ERROR<br />
<code>msglen:</code> Length of incoming message body<br />
<code>ssl:</code> valid SSL context in case SSL is enabled. Please refer s<code>do_con_connect()</code>  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h4 id="sdo_con_recv_msg_body">sdo_con_recv_msg_body()<a class="headerlink" href="#sdo_con_recv_msg_body" title="Permanent link">&para;</a></h4>
<pre><code>int32_t sdo_con_recv_msg_body(sdo_con_handle handle, uint8_t *buf,
                              size_t length, void *ssl)
</code></pre>

<p><em>Description</em><br />
This function receives the message body on the connection specified by <code>handle</code> in the provided memory pointed to by <code>buf</code> of size <code>length</code>. The message received corresponds to the message header received in the immediate preceding call to <code>sdo_con_recv_msg_header()</code>. This function blocks unless the specified length of data is received.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a minimal change in implementation for porting to custom platform, as the reference implementation relies on Linux* libraries to receive data from the server.</p>
</div>
<p><em>Parameters</em><br />
<code>handle:</code> Connection handle. Please refer to <code>sdo_con_connect()</code><br />
<code>buf:</code> pointer to the empty buffer for receiving the message<br />
<code>length:</code> size of buf and equal to returned from sdo_con_recv_msg_header().<br />
<code>ssl:</code> valid SSL context in case SSL is enabled. Please refer to <code>sdo_con_connect()</code>  </p>
<p><em>Return Value</em>
Number of bytes for success
<code>-1</code> for failure</p>
<h4 id="sdo_con_send_message">sdo_con_send_message()<a class="headerlink" href="#sdo_con_send_message" title="Permanent link">&para;</a></h4>
<pre><code>int32_t sdo_con_send_message(sdo_con_handle handle, uint32_t protocol_version,
                             uint32_t message_type, const uint8_t *buf,
                             size_t length, void *ssl)
</code></pre>

<p><em>Description</em><br />
This function sends the data pointed by <code>buf</code> of size <code>length</code> over the connection specified by <code>handle</code> with <code>protocol_version</code> and <code>message_type</code> as metadata.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a minimal change in implementation for porting to custom platform, as the reference implementation relies on Linux libraries to send data to the server.</p>
</div>
<p><em>Parameters</em><br />
<code>handle:</code> Connection handle. Please refer to <code>sdo_con_connect()</code><br />
<code>protocol_version:</code> Client SDK supports 113<br />
<code>message_type:</code> Client SDK state machine specific. To be used as is<br />
<code>buf:</code> pointer to the buffer containing the message to be sent<br />
<code>length:</code> size of buf<br />
<code>ssl:</code> valid SSL context in case SSL is enabled. Please refer to <code>sdo_con_connect()</code>  </p>
<p><em>Return Value</em><br />
<code>0</code> for success<br />
<code>-1</code> for failure </p>
<h3 id="network-generic-functions">Network Generic Functions<a class="headerlink" href="#network-generic-functions" title="Permanent link">&para;</a></h3>
<h4 id="sdo_net_to_host_long">sdo_net_to_host_long()<a class="headerlink" href="#sdo_net_to_host_long" title="Permanent link">&para;</a></h4>
<pre><code>uint32_t sdo_net_to_host_long(uint32_t value)
</code></pre>

<p><em>Description</em>
This function converts the <code>value</code> from network byte order to host byte order.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a change in implementation for porting to custom platform, as the reference implementation to perform the functionality.</p>
</div>
<p><em>Parameters</em>
value: unsigned integer of size 4 bytes in network byte order</p>
<p><em>Return Value</em><br />
Unsigned integer of size 4 bytes converted to host byte order</p>
<h4 id="sdo_host_to_net_long">sdo_host_to_net_long()<a class="headerlink" href="#sdo_host_to_net_long" title="Permanent link">&para;</a></h4>
<p><code>uint32_t sdo_host_to_net_long(uint32_t value)</code></p>
<p><em>Description</em><br />
This function converts the <code>value</code> from host byte order to network byte order.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a change in implementation for porting to custom platform, as the reference implementation to perform the functionality.</p>
</div>
<p><em>Parameters</em><br />
<code>value:</code> unsigned integer of size 4 bytes in host byte order  </p>
<p><em>Return Value</em><br />
Unsigned integer of size 4 bytes converted to network byte order  </p>
<h4 id="sdo_printable_to_net">sdo_printable_to_net()<a class="headerlink" href="#sdo_printable_to_net" title="Permanent link">&para;</a></h4>
<pre><code>int32_t sdo_printable_to_net(const char *src, void *addr)
</code></pre>

<p><em>Description</em><br />
This function converts the IP address in ASCII string pointed to by <code>src</code> to network byte order and stores the result in <code>addr</code>.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a change in implementation for porting to custom platform, as the reference implementation to perform the functionality.</p>
</div>
<p><em>Parameters</em><br />
<code>src:</code> points to a character string containing an IPv4 network address in dotted-decimal format
<code>addr:</code> output buffer to receive IPV4 network address in network byte order  </p>
<p><em>Return Value</em><br />
<code>1</code> for success<br />
<code>-1</code> for failure 
<code>0</code> if input format is invalid</p>
<h3 id="legacy-functions">Legacy Functions<a class="headerlink" href="#legacy-functions" title="Permanent link">&para;</a></h3>
<h4 id="get_device_model">get_device_model()<a class="headerlink" href="#get_device_model" title="Permanent link">&para;</a></h4>
<pre><code>const char *get_device_model(void)
</code></pre>

<p><em>Description</em><br />
This function either statically or dynamically generates a device model string.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a change in implementation for porting to custom platform, as the reference implementation returns a hard-coded string.</p>
</div>
<p><em>Parameters</em><br />
None </p>
<p><em>Return Value</em>
NULL terminated ASCII string</p>
<h4 id="get_device_serial_number">get_device_serial_number()<a class="headerlink" href="#get_device_serial_number" title="Permanent link">&para;</a></h4>
<pre><code>const char *get_device_serial_number(void)
</code></pre>

<p><em>Description</em><br />
This function either statically or dynamically generates a device serial number string.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a change in implementation for porting to custom platform, as the reference implementation returns a hard-coded string.</p>
</div>
<p><em>Parameters</em><br />
None </p>
<p><em>Return Value</em><br />
NULL terminated ASCII string</p>
<h4 id="sdo_random">sdo_random()<a class="headerlink" href="#sdo_random" title="Permanent link">&para;</a></h4>
<pre><code>int sdo_random(void)
</code></pre>

<p><em>Description</em><br />
This function generates a random number  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a change in implementation for porting to custom platform, as the reference implementation uses Linux libraries to perform the functionality.</p>
</div>
<p><em>Parameters</em><br />
None </p>
<p><em>Return Value</em><br />
A random number  </p>
<h4 id="sdo_sleep">sdo_sleep()<a class="headerlink" href="#sdo_sleep" title="Permanent link">&para;</a></h4>
<pre><code>void sdo_sleep(int sec)
</code></pre>

<p><em>Description</em><br />
This function introduces the delay for <code>sec</code> number of seconds  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a change in implementation for porting to custom platform, as the reference implementation uses Linux libraries to perform the functionality.</p>
</div>
<h2 id="storage-subsystem-api">Storage Subsystem API<a class="headerlink" href="#storage-subsystem-api" title="Permanent link">&para;</a></h2>
<p>Storage is a platform offering which enables Client SDK to store the credentials, state of the Client device on the storage medium. The required functionality by the Client SDK is abstracted via a set of APIs declared in file "storage/include/storage_al.h".</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section of the document specifies the internal APIs to abstract Storage implementation from Client SDK and are subject to change.</p>
</div>
<h3 id="constants_2">Constants<a class="headerlink" href="#constants_2" title="Permanent link">&para;</a></h3>
<h4 id="sdo_sdk_blob_flags">sdo_sdk_blob_flags<a class="headerlink" href="#sdo_sdk_blob_flags" title="Permanent link">&para;</a></h4>
<p>This enum defines the supported storage hierarchy by the API</p>
<pre><code>typedef enum {
        SDO_SDK_SECURE_DATA = 1,
        SDO_SDK_NORMAL_DATA = 2,
        SDO_SDK_OTP_DATA = 4,
        SDO_SDK_RAW_DATA = 8
} sdo_sdk_blob_flags;
</code></pre>

<table>
<thead>
<tr>
<th>Enum</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>SDO_SDK_SECURE_DATA</td>
<td>This flag indicates to the storage API that the data is Authenticated Encrypted. As an example, the algorithm used could be AES-GCM or AES + HMAC to support this mode</td>
</tr>
<tr>
<td>SDO_SDK_NORMAL_DATA</td>
<td>This flag indicates to the storage API that the data contains Authentication information. As an example, the data is stored along with its HMAC</td>
</tr>
<tr>
<td>SDO_SDK_OTP_DATA</td>
<td>This flag indicates to the storage API that the data resides in One Time Programmable memory, so, essentially, only 1 write is possible.</td>
</tr>
<tr>
<td>SDO_SDK_RAW_DATA</td>
<td>This flag indicates to the storage API that the data is plaintext</td>
</tr>
</tbody>
</table>
<h3 id="data-types_1">Data Types<a class="headerlink" href="#data-types_1" title="Permanent link">&para;</a></h3>
<p>There are no specific data types for Storage APIs</p>
<h3 id="blob-functions">Blob Functions<a class="headerlink" href="#blob-functions" title="Permanent link">&para;</a></h3>
<h4 id="sdo_blob_read">sdo_blob_read()<a class="headerlink" href="#sdo_blob_read" title="Permanent link">&para;</a></h4>
<pre><code>int32_t sdo_blob_read(const char *blob_name, sdo_sdk_blob_flags flags,
                      uint8_t *buffer, uint32_t length)
</code></pre>

<p><em>Description</em><br />
This function reads the data into the <code>buffer</code> of size <code>length</code> from the blob identified by <code>blob_name</code> whose storage properties match with the <code>flags</code>. Before reading the data from blob into the <code>buffer</code>, it is recommended to use <code>sdo_blob_size()</code> to allocate the exact length of <code>buffer</code>.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a change in implementation for porting to a custom platform. For guidance in assessing the secure storage requirements for your device, refer to the Client SDK Security Implications document. </p>
</div>
<p><em>Parameters</em><br />
<code>blob_name:</code> NULL terminated string identifying the existing blob<br />
<code>flags:</code>  Please refer sdo_sdk_blob_flags<br />
<code>buffer:</code> empty buffer to read the blob data<br />
<code>length:</code> size of buffer  </p>
<p><em>Return Value</em><br />
Number of bytes read for success<br />
<code>-1</code> for failure  </p>
<h4 id="sdo_blob_write">sdo_blob_write()<a class="headerlink" href="#sdo_blob_write" title="Permanent link">&para;</a></h4>
<pre><code>int32_t sdo_blob_write(const char *blob_name, sdo_sdk_blob_flags flags,
                       const uint8_t *buffer, uint32_t length)
</code></pre>

<p><em>Description</em><br />
This function writes the data from <code>buffer</code> of size <code>length</code> to the blob identified by <code>blob_name</code> whose storage properties are identified with the <code>flags</code>. This function must create the blob if it doesnt exist, otherwise, overwrite the blob.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a change in implementation for porting to a custom platform. For guidance in assessing the secure storage requirements for your device, refer to the Client SDK Security Implications document.  </p>
</div>
<p><em>Parameters</em><br />
<code>blob_name:</code> NULL terminated string identifying the blob to be created<br />
<code>flags:</code>  Please refer sdo_sdk_blob_flags<br />
<code>buffer:</code> data to be stored in the blob<br />
<code>length:</code> size of the data to be stored into the blob  </p>
<p><em>Return Value</em><br />
Number of bytes written for success<br />
<code>-1</code> for failure </p>
<h4 id="sdo_blob_size">sdo_blob_size()<a class="headerlink" href="#sdo_blob_size" title="Permanent link">&para;</a></h4>
<pre><code>int32_t sdo_blob_size(const char *blob_name, sdo_sdk_blob_flags flags)
</code></pre>

<p><em>Description</em><br />
This function returns the size of blob identified by <code>blob_name</code> whose storage properties match with the <code>flags</code>. This should be used before sdo_blob_read()  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a change in implementation for porting to a custom platform. For guidance in assessing the secure storage requirements for your device, refer to the Client SDK Security Implications document.  </p>
</div>
<p><em>Parameters</em><br />
<code>blob_name:</code> NULL terminated string identifying the existing blob<br />
<code>flags:</code>  Please refer sdo_sdk_blob_flags  </p>
<p><em>Return Value</em><br />
Blob size for success<br />
<code>0</code> if the blob doesnt exist<br />
<code>-1</code> for failure </p>
<h4 id="sdo_read_epid_key">sdo_read_epid_key()<a class="headerlink" href="#sdo_read_epid_key" title="Permanent link">&para;</a></h4>
<pre><code>int32_t sdo_read_epid_key(uint8_t *buffer, uint32_t *size)
</code></pre>

<p><em>Description</em><br />
This function reads the EPID key from the storage medium into the buffer of size size. Before calling the function, a buffer of size 144 bytes is required to be allocated which is the length of the EPID key as per the EPID specification used (Version: 6)  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function may require a change in implementation for porting to a custom platform. For guidance in assessing the secure storage requirements for your device, refer to the Client SDK Security Implications document.  </p>
</div>
<p><em>Parameters</em><br />
<code>buffer:</code> pointer to a memory of size 144 bytes.<br />
<code>size:</code> the size of buffer which must be 144 bytes  </p>
<p><em>Return Value</em><br />
Number of bytes read for success (must be 144)<br />
<code>-1</code> for failure </p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../client-sdk-api-reference/" title="API Reference" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                API Reference
              </div>
            </div>
          </a>
        
        
          <a href="../../iot-platform-sdk/introduction/" title="Introduction" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Introduction
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 Intel Corporation - Released under CC BY 4.0 license
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.d1f5a259.min.js"></script>
      <script src="../../assets/javascripts/bundle.d5fec882.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.fae956e7.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../../js/version-select.js"></script>
      
    
  </body>
</html>